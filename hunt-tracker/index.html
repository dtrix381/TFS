<div id="authStatus" style="text-align:center; margin-top: 20px;"></div>

<script>
  const urlParams = new URLSearchParams(window.location.search);
  const username = urlParams.get("username");

  const authStatusEl = document.getElementById("authStatus");

  if (username) {
    // ✅ Show logged-in username
    authStatusEl.innerHTML = `
      <div style="
        color: gold;
        font-weight: bold;
        text-align: right;
        padding: 10px 20px;
        font-size: 16px;
      ">
        👤 Logged in as <span style="color: #1f8fff;">${username}</span>
      </div>
    `;
  } else {
    // 🟢 Show login button
    authStatusEl.innerHTML = `
      <button onclick="loginWithDiscord()" style="
        background: #7289da;
        color: white;
        font-weight: bold;
        padding: 10px 25px;
        font-size: 16px;
        border: none;
        border-radius: 6px;
        cursor: pointer;
        box-shadow: 0 0 10px #7289da;
      ">🔐 Use Widget</button>
    `;
  }

  function loginWithDiscord() {
    window.location.href = "https://tfs-widget-auth.onrender.com/hunt-tracker/auth/discord";
  }
</script>
